{% load staticfiles %}
<html>
    <head>
        <title>
            Add Experience
        </title>
        <meta charset="utf-8">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
body, html {
  height: 100%;
  font-size:16px;

}

.bg-image {
  /* The image used */
  background-image: url("{% static 'background.jpg' %}");
  
  /* Add the blur effect */
  filter: blur(8px);
  -webkit-filter: blur(8px);
  
  /* Full height */
  height: 100%; 
  
  /* Center and scale the image nicely */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}
    .glyphicon {
        font-size: 50px;
        margin-top: 10px;
    }
    .glyphicon.glyphicon-search {
        font-size: 14px;
    }
    .glyphicon.glyphicon-home,.glyphicon.glyphicon-user,.glyphicon.glyphicon-folder-close {
        font-size: 20px;
    }
    .modal-body{
    font-size: 20px;
    }
    ul{
    list-style-type: none;
    display:inline;}
    li {
      float: left;
    }
    .bg-text {
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0, 0.4); /* Black w/opacity/see-through */
  color: white;
  font-weight: bold;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  width: 100%;
  padding: 100px;
  text-align: center;
}
 a:hover{
color:white;
     font-weight:bold;
    font-family: 'CantarellBold', Arial, sans-serif;
    text-transform: capitalize;
}
.container{
  margin-top: 100px;
}
@media all and (max-width:982px){
  .container{
    margin-top: 550px;
  }
}

    </style> 
    </head>
    <body style="background-color:darkgray">
            <!-- <nav class="navbar navbar-inverse">
                    <div class="container-fluid">
                      <div class="navbar-header">   
                        <a class="navbar-brand" href="#"><h1><b>LinkedIn</b></h1></a>
                      </div>
                      <ul class="nav navbar-nav" style="font-size:16px">
                        <li class="active"><a href="{% url 'index' 'profile' %}"><i style="margin-right:8px;" class="glyphicon glyphicon-home"></i>Home</a></li>
                        <li><a href="#"><i style="margin-right:8px;" class="glyphicon glyphicon-user"></i>My Network</a></li>
                        <li><a href="#"><i style="margin-right:8px;" class="glyphicon glyphicon-folder-close"></i>Jobs</a></li>
                      </ul>
                      <form class="navbar-form navbar-left" action="" method="post">
			{% csrf_token %}
                        <div class="input-group">
                          <input style="width:180px;" type="text" class="form-control" placeholder="Search" name="search" required>
                          <div class="input-group-btn">
                            <button class="btn btn-default" type="submit">
                              <i class="glyphicon glyphicon-search"></i>
                            </button>
                          </div>
                        </div>
                      </form>
                    </div>
                </nav> -->
                <nav class="navbar fixed-top navbar-expand-lg navbar-light" style="background-color:#1d0303">
                    <a class="navbar-brand" href="#" style=" font-size:40px;"><b style="color:rgb(0, 123, 139);">LinkedIn</b></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                      <ul class="navbar-nav">
                          <li style="margin-left:15px; font-size:18px;" class="nav-item active"><a style="color:gray" class="nav-link" href="{% url 'index' 'profile' %}"><i style="margin-right:8px;" class="glyphicon glyphicon-home"></i>Home</a></li>
                          <li style="margin-left:15px; font-size:18px;" class="nav-item"><a style="color:gray" class="nav-link" href="#"><i style="margin-right:8px;" class="glyphicon glyphicon-user"></i>My Network</a></li>
                          <li style="margin-left:15px; font-size:18px;" class="nav-item"><a style="color:gray" class="nav-link" href="{% url 'allJobs' %}"><i style="margin-right:8px;" class="glyphicon glyphicon-folder-close"></i>Jobs</a></li>
                          <li style="margin-left:45px; margin-top:15px;" class="nav-item">
                            <form class="navbar-form navbar-left" action="{% url 'index' 'search' %}" method="post">
                                {% csrf_token %}
                                                  <div class="input-group">
                                                    <input style="width:220px;height:38px" type="text" id="search" class="form-control" placeholder="Search" name="search" required>
                                                    <div class="input-group-btn">
                                                      <button class="btn btn-default" id="submit" type="submit">
                                                        <i class="glyphicon glyphicon-search"></i>
                                                      </button>
                                                    </div>
                                                  </div>
                              </form>
                            </li>
                        </ul>
                      </ul>
                    </div>
                  </nav>
<div class="bg-image"></div>
<div class="bg-text" style="margin-top:50px">

        <div class="container" style="background-color:darkcyan; width:50% ">
                <form autocomplete="off" method="post" style="width:75%; margin:10%;" enctype="multipart/form-data">
{% csrf_token %}
<!-- code for form submission modal -->
{% if msg %}
 <div class="alert alert-success" style="margin-top:120px">
    <strong>{{msg}}</strong> 
  </div>
{% endif %}
<!-- modal code ends here -->

<h3 style="color:black;font-style: italic"> Add Experience </h3>
                        <div class="form-group">
                            <label for="Profile">Profile *</label>
                            <input type="text" class="form-control" id="profile" placeholder="Your Profile.." name="designation" required>
                        </div>

                        <div class="form-group">
                            <label for="company">Company *</label>
                            <input type="text" class="form-control" id="company" placeholder="Ex: Google" name="company" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="5"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="startDate">Start Date</label>
                            <input type="text" class="form-control" name="start_date" id="start">
                        </div>
                        <div class="form-group">
                             <label for="endDate">Expected End Date</label>
                            <input type="text" class="form-control" id="end" name="end_date" >
                        </div>
                        
                        <input type="submit" class="btn btn-primary" id="submitExp">
                </form>
<div id="myClick"></div>
        </div>

</div>
        <!-- Footer -->
<div class="fixed-bottom" >

<footer class="page-footer font-small special-color-dark pt-4" style="background-color:black;">

    <!-- Footer Links -->
    <div class="container-fluid text-center text-md-left">


    <!-- Copyright -->
    <div class="footer-copyright text-center py-3" style="font-size:16px; color:white">&copy; 2019 Copyright:
      <a href="https://mdbootstrap.com/education/bootstrap/"> LinkedinHack.com</a>
    </div>
    <!-- Copyright -->

  </footer>
</div>
  <!-- Footer -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>   
    </body>
    <script>
      var colors = [ 'aqua' , 'azure' , 'beige', 'bisque', 'black', 'blue', 'brown', 'chocolate', 'coral', 'crimson', 'cyan', 'fuchsia', 'ghostwhite', 'gold', 'goldenrod', 'gray', 'green', 'indigo', 'ivory', 'khaki', 'lavender', 'lime', 'linen', 'magenta', 'maroon', 'moccasin', 'navy', 'olive', 'orange', 'orchid', 'peru', 'pink', 'plum', 'purple', 'red', 'salmon', 'sienna', 'silver', 'snow', 'tan', 'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'white', 'yellow'];
      var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition
      var SpeechGrammarList = SpeechGrammarList || webkitSpeechGrammarList
      var SpeechRecognitionEvent = SpeechRecognitionEvent || webkitSpeechRecognitionEvent
      var grammar = '#JSGF V1.0; grammar colors; public <color> = ' + colors.join(' | ') + ' ;'
      var status="none";
      //document.getElementById('hello').click();
        
      var recognition = new SpeechRecognition();
      var speechRecognitionList = new SpeechGrammarList();
      speechRecognitionList.addFromString(grammar, 1);
      recognition.grammars = speechRecognitionList;
      //recognition.continuous = false;
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;
      recognition.continuous = true;
      var  count=0;
      var profile=document.getElementById('profile');
      var company=document.getElementById('company');
      var description=document.getElementById('description');
      var start=document.getElementById("start");
      var end=document.getElementById("end");
      var submit=document.getElementById("submit");
      var form=0;
      
       $(document).ready(function() {
      
      
      // document.body.onclick = function() {
      
      recognition.start();
      recognition.onresult = function(event) {
       
        var last = event.results.length - 1;
        var color = event.results[last][0].transcript;
      console.log(color);
      //document.getElementById("myClick").innerHTML = color;
      var link = "{% url 'process' %}";
      //.replace('1234', $('#myClick').val());
      var jsonText = color; //JSON.stringify(values);
      
     if(form!==1){$.ajax({url: link, data: {'color': color},
      success: function(data){
         console.log("successfully called ajax call");
       
      // code for search operation
      if(data.operation=="search"){
      var text="";
      if(data.org!=""&&data.person!=""){
      text = data.person+","+data.org;}
      else if(data.org!=""){
      text=data.org;}
      else if(data.person!=""){
      text = data.person;
      }else {
text =data.entity; }

      document.getElementById('search').value=text;
      document.getElementById('search').innerhtml=text;
      
      document.getElementById('submit').click();  }
      
      //code for add operation
      else if(data.operation=="add"){
      
      if(data.link=="education"){
        window.location.href = "{%url 'addEdu' %}";
      }
        else if(data.link=="experience"){
        window.location.href = "{%url 'addExp' %}";
      }
        else if(data.link=="project"){
        window.location.href = "{%url 'addProject' %}";
      }
else{
        //document.getElementById('profile_button').click();  
       window.location.href = "{%url 'index' 'profile' %}";

      }

}
else if(data.operation=="navigate"){
  if(data.link=="next" || data.link=="forward"){
    window.history.forward();
    console.log("Navigation")
  }else{
    window.history.back();
    console.log("Navigation")
  }
}
      }})};
      
        if(color.replace(/\s/g, "").toLowerCase()=="start")
      {    console.log(color);
        status="done";
        form=1;
            document.getElementById('myClick').click();
      //responsiveVoice.speak("Lets start");
      
      
      } else
      {  console.log("not recognized");
      
      }
      if(status=="done"){
      
      if(count==0){
        if(color.replace(/\s/g, "").toLowerCase()=="proceed"){
          count=count+1;
          document.getElementById('myClick').click();
        }
        else if(color!="start"){
          profile.value+=color;
        }
      }
      else if(count==1){
        if(color.replace(/\s/g, "").toLowerCase()=="proceed"){
    count=count+1;
    document.getElementById('myClick').click();
  }
  else if(color!="proceed"){
    company.value+=color;
  }
   }
      else if(count==2){
        if(color.replace(/\s/g, "").toLowerCase()=="proceed"){
    count=count+1;
    document.getElementById('myClick').click();
  }
  else if(color!="proceed"){
    description.value+=color;
  }
}
      else if(count==3){
        if(color.replace(/\s/g, "").toLowerCase()=="proceed"){
    count=count+1;
    document.getElementById('myClick').click();
  }
  else if(color!="proceed"){
    start.value+=color;
  }
  }
      else if(count==4){
        if(color.replace(/\s/g, "").toLowerCase()=="proceed"){
    count=count+1;
    document.getElementById('myClick').click();
  }
  else if(color!="proceed"){
    end.value+=color;
  }
}
      else if(color.replace(/\s/g, "").toLowerCase()=="yes"){
        var success="{% static 'successfull.wav' %}";
        function playSound(success){
           var audio=document.createElement('audio');
           audio.style.display="none";
           audio.src=success;
           audio.autoplay=true;
           document.body.appendChild(audio);
           console.log("audio played..");
          
         }
         playSound(success);
          setTimeout(function(){
            form=0;
             document.getElementById("submitExp").click(playSound);
          console.log("submitted");
           }, 4000);
      }
         } // here status condition ends
      };
      
      document.getElementById('myClick').onclick = function() {
      var line;
      if(count==0){
        line ="{% static 'profile.wav' %}";
      }
      else if(count==1){
        line ="{% static 'company2.wav' %}";
      }
      else if(count==2){
        line ="{% static 'job_desc.wav' %}";
      
      }
      else if(count==3){
        line ="{% static 'startDate.wav' %}";
      }
      else if(count==4){
        line ="{% static 'endDate.wav' %}";
      }
      else if(count==5){
      line ="{% static 'confirm.wav' %}";
    }
      
       // responsiveVoice.speak(line);
       function playSound(line){
         var audio=document.createElement('audio');
         audio.style.display="none";
         audio.src=line;
         audio.autoplay=true;
         document.body.appendChild(audio);
         console.log("audio played..");
       }
      
       playSound(line);
        }
});      
//}
      
      
      </script>
      {{res}}
      
</html>